(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{3756:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/c/[...slug]",function(){return t(481)}])},481:(e,a,t)=>{"use strict";t.r(a),t.d(a,{__N_SSP:()=>$,default:()=>ee});var l=t(4848),r=t(6540),n=t(6715),o=t(2578);let s=(0,r.createContext)(void 0),i="tab_cache",c=["all","new","popular","az","za","mostliked"],d=e=>2*JSON.stringify(e).length,u=e=>Date.now()-e>18e5,m=e=>({results:Array.isArray(null==e?void 0:e.results)?e.results:[],total:"number"==typeof(null==e?void 0:e.total)?e.total:0,timestamp:"number"==typeof(null==e?void 0:e.timestamp)?e.timestamp:Date.now(),isLoaded:!!(null==e?void 0:e.isLoaded)});function g(e){let{children:a,initialCache:t}=e,o=(0,n.useRouter)().locale||"en",[g,v]=(0,r.useState)(()=>{let e={timestamp:Date.now(),data:{}};if(t){let e={timestamp:t.timestamp||Date.now(),data:{}};c.forEach(a=>{var l;let r="".concat(o,"_").concat(a);e.data[r]={},(null===(l=t.data)||void 0===l?void 0:l[r])&&Object.entries(t.data[r]).forEach(a=>{let[t,l]=a;e.data[r][Number(t)]=m(l)})});try{localStorage.setItem("".concat(i,"_").concat(o),JSON.stringify(e))}catch(e){console.warn("Failed to save initial cache to localStorage:",e)}return e}{let e=localStorage.getItem("".concat(i,"_").concat(o));if(e)try{let a=JSON.parse(e),t={timestamp:a.timestamp||Date.now(),data:{}};return c.forEach(e=>{var l;let r="".concat(o,"_").concat(e);t.data[r]={},(null===(l=a.data)||void 0===l?void 0:l[r])&&Object.entries(a.data[r]).forEach(e=>{let[a,l]=e;t.data[r][Number(a)]=m(l)})}),t}catch(e){console.warn("Failed to parse cache from localStorage:",e)}}return c.forEach(a=>{let t="".concat(o,"_").concat(a);e.data[t]={}}),e}),h=(0,r.useCallback)(()=>{let e={timestamp:Date.now(),data:{}};c.forEach(a=>{let t="".concat(o,"_").concat(a);e.data[t]={}}),v(e),localStorage.removeItem("".concat(i,"_").concat(o))},[o]),f=(0,r.useCallback)(e=>{let a={timestamp:Date.now(),data:{}},t=[];Object.entries(e.data).forEach(e=>{let[a,l]=e;Object.entries(l).forEach(e=>{let[l,r]=e;t.push([a,Number(l),m(r)])})}),t.sort((e,a)=>a[2].timestamp-e[2].timestamp);let l=0;for(let[e,r,n]of t){if(u(n.timestamp))continue;let t=d({[e]:{[r]:n}});if(l+t>2097152)break;a.data[e]||(a.data[e]={}),a.data[e][r]=n,l+=t}return c.forEach(e=>{let t="".concat(o,"_").concat(e);a.data[t]||(a.data[t]={})}),a},[o]);(0,r.useEffect)(()=>{try{let e=JSON.stringify(g);if(d(g)>2097152){let e=f(g);v(e),localStorage.setItem("".concat(i,"_").concat(o),JSON.stringify(e))}else localStorage.setItem("".concat(i,"_").concat(o),e)}catch(a){console.warn("Failed to save cache to localStorage:",a);let e=f(g);v(e);try{localStorage.setItem("".concat(i,"_").concat(o),JSON.stringify(e))}catch(e){console.error("Failed to save cleaned cache to localStorage:",e)}}},[g,o,f]);let p=(0,r.useCallback)((e,a)=>{let t="".concat(o,"_").concat(e);try{g.data[t]||(g.data[t]={});let e=g.data[t][a];if(e){let a=m(e);if(u(a.timestamp)||!a.isLoaded)return null;return a}{let e=localStorage.getItem("".concat(i,"_").concat(o));if(e)try{var l,r;let n=JSON.parse(e),o=null===(r=n.data)||void 0===r?void 0:null===(l=r[t])||void 0===l?void 0:l[a];if(o){let e=m(o);if(u(e.timestamp)||!e.isLoaded)return null;return v(l=>{let r={...l};return r.data[t]||(r.data[t]={}),r.data[t][a]=e,r}),e}}catch(e){console.warn("Failed to parse cache from localStorage:",e)}}return null}catch(e){return console.error("Error in getCachedData:",e),null}},[g,o]),b=(0,r.useCallback)((e,a,t)=>{var l;let r="".concat(o,"_").concat(e),n=Date.now(),s=m({...t,timestamp:n,isLoaded:null===(l=t.isLoaded)||void 0===l||l});v(e=>{let t={...e};return t.data[r]||(t.data[r]={}),t.data[r][a]=s,{timestamp:n,data:t.data}})},[o]);return(0,l.jsx)(s.Provider,{value:{cache:g,getCachedData:p,setCachedData:b,clearCache:h},children:a})}function v(){let e=(0,r.useContext)(s);if(void 0===e)throw Error("useTabCache must be used within a TabCacheProvider");return e}var h=t(9965),f=t.n(h),p=t(4953),b=t.n(p),y=t(1151),x=t(1270),w=t(6664),j=t(7957);let N=w.bL,k=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,l.jsx)(w.B8,{ref:a,className:(0,j.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),role:"tablist","aria-orientation":r["aria-orientation"]||"horizontal",...r})});k.displayName=w.B8.displayName;let C=r.forwardRef((e,a)=>{let{className:t,children:r,...n}=e,o=void 0!==n["aria-selected"]?n["aria-selected"]:"active"===n["data-state"];return(0,l.jsx)(w.l9,{ref:a,className:(0,j.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm md:text-lg font-bold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),role:"tab","aria-selected":o,...n,children:(0,l.jsx)("span",{className:"truncate",children:r})})});C.displayName=w.l9.displayName;let A=r.forwardRef((e,a)=>{let{className:t,children:r,...n}=e;return(0,l.jsx)(w.UC,{forceMount:!0,ref:a,className:(0,j.cn)("mt-2 w-full block ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=inactive]:hidden data-[state=active]:block transition-[display] duration-250",t),role:"tabpanel",tabIndex:0,...n,children:(0,l.jsx)("div",{className:"focus:outline-none w-full block",children:r})})});A.displayName=w.UC.displayName;var S=t(7202);let z=r.memo(function(e){let{recommended:a,new:t,mostLiked:s,az:i,za:c,onTabChange:d,currentPage:u=1,addPopularGames:m=!0}=e,g=(0,n.useRouter)(),h=(0,o.useTranslations)("common"),{getCachedData:f,setCachedData:p}=v(),[b,w]=(0,r.useState)(g.query.sort||"recommended"),[z,Z]=(0,r.useState)(!1),[L,P]=(0,r.useState)("recommended"),[R,G]=(0,r.useState)(!1),{isLoading:E,setLoading:I}=(0,y.R)(),q=(0,r.useRef)(null),T=(0,r.useRef)(null);(0,r.useEffect)(()=>(T.current=new ResizeObserver(e=>{for(let a of e){let e=a.contentRect.height;q.current&&e>0&&(q.current.style.height="".concat(e,"px"))}}),()=>{T.current&&T.current.disconnect()}),[]),(0,r.useCallback)(async e=>{let a=g.query.slug,t=Array.isArray(a)?a.join("/"):a;t&&(console.log("Updating URL to sort=".concat(e)),await g.push({pathname:"/c/".concat(t),query:{sort:e}},void 0,{shallow:!0}))},[g]),(0,r.useEffect)(()=>{let e=g.query.sort;e?(x.v.debug("URL sort changed to:",e),w(e),Z("az"===e||"za"===e),P(e),"az"===e||"za"===e?(O.current=!0,x.v.debug("URL changed to A-Z/Z-A, setting hasClickedAZRef to true")):(O.current=!1,x.v.debug("URL changed to non-A-Z/Z-A sort, resetting hasClickedAZRef"))):(x.v.debug("No sort in URL, defaulting to recommended"),w("recommended"),Z(!1),P("recommended"),O.current=!1),D.current=0},[g.query.sort]);let _=(0,r.useCallback)(async e=>{if("az"===e){x.v.debug("handleValueChange skipping A-Z/Z-A tab value, handled by handleTabClick");return}try{if(x.v.debug("handleValueChange called with value:",e,"current selectedSort:",b),e===b){x.v.debug("Skipping handleValueChange - same value");return}if(("az"===e||"za"===e)&&["az","za"].includes(b)){x.v.debug("Skipping handleValueChange - A-Z/Z-A toggle handled by handleTabClick");return}"az"!==e&&"za"!==e&&(O.current=!1,x.v.debug("Switching to a non-A-Z/Z-A tab, resetting hasClickedAZRef")),x.v.debug("Processing tab change to:",e),I(!0),w(e),P(e);let a={...g.query,page:"1"};"recommended"===e?(delete a.sort,x.v.debug('Updating URL in handleValueChange for "recommended", removing sort param')):(a.sort=e,x.v.debug("Updating URL in handleValueChange to sort=".concat(e))),await g.push({pathname:g.pathname,query:a},void 0,{shallow:!0}),d&&await d(e)}catch(e){x.v.error("Error changing tab:",e)}finally{I(!1),q.current&&(q.current.style.height="auto"),T.current&&q.current&&T.current.unobserve(q.current)}},[g,d,b,P,I]),O=(0,r.useRef)(!1),D=(0,r.useRef)(0),U=(0,r.useCallback)(async e=>{if("az"===e.value){if(R){x.v.debug("Ignoring click - already loading");return}try{let e;G(!0);let a=Date.now(),t=a-D.current<500;if(D.current=a,t){x.v.debug("Ignoring rapid second click"),G(!1);return}let l=g.query.sort;O.current||"az"===l||"za"===l?"az"===l?(e="za",x.v.debug("TOGGLING FROM A-Z TO Z-A")):(e="az",x.v.debug("TOGGLING FROM Z-A OR OTHER TO A-Z")):(e="az",O.current=!0,x.v.debug("FIRST CLICK - NOT ON A-Z/Z-A, SETTING TO A-Z")),x.v.debug("A-Z tab clicked, current URL sort: ".concat(l,", new sort: ").concat(e)),w(e),P(e),I(!0),x.v.debug("Updating URL to sort=".concat(e));try{await g.replace({pathname:g.pathname,query:{...g.query,sort:e,page:"1"}},void 0,{shallow:!0}),d&&await d(e)}catch(a){if(x.v.error("Error during router navigation:",a),d)try{await d(e)}catch(e){x.v.error("Error in tab change callback:",e)}}}catch(e){x.v.error("Error handling tab click:",e)}finally{I(!1),G(!1),q.current&&(q.current.style.height="auto"),T.current&&q.current&&T.current.unobserve(q.current)}}else O.current=!1,P(e.value)},[g,R,d,I]),F=(0,r.useCallback)(e=>{switch(e){case"recommended":return h("games.recommended");case"new":return h("games.new");case"mostliked":return h("games.most-liked");case"az":return"A - Z";case"za":return"Z - A";default:return""}},[h]),M=(0,r.useMemo)(()=>{let e=g.query.sort,a="za"===e?"Z - A":"A - Z";x.v.debug("Rendering tabs with router.query.sort:",e,"selectedSort:",b,"azTabLabel:",a);let l=[{value:"recommended",label:h("games.recommended")},{value:"az",label:a}];return t&&l.splice(1,0,{value:"new",label:h("games.new")}),m&&l.splice(t?2:1,0,{value:"mostliked",label:h("games.most-liked")}),l},[g.query.sort,b,h,t,m]),B=(0,r.useMemo)(()=>{let e={recommended:a,new:t,mostliked:s,az:i,za:c};return b&&!e[b]?(x.v.warn("Invalid sort value: ".concat(b,", defaulting to recommended")),{...e,[b]:e.recommended}):e},[a,t,s,i,c,b]);return(0,l.jsxs)(N,{value:b,onValueChange:_,defaultValue:"recommended",orientation:"horizontal",children:[(0,l.jsx)(k,{className:"flex !min-h-fit items-start relative bg-transparent justify-start mb-[1.1rem] space-x-4 sm:space-x-8 max-w-full overflow-x-scroll overflow-y-visible scrollbar-hide sm:overflow-x-visible [@media(max-width:537px)]:w-[calc(100%-1.5rem)]","aria-label":"Game sorting options",children:M.map(e=>{let a="az"===e.value?"az"===b||"za"===b:b===e.value;return x.v.debug("Tab ".concat(e.value," isSelected:"),a,"selectedSort:",b),(0,l.jsxs)(C,{value:e.value,id:"tab-".concat(e.value),"aria-controls":"panel-".concat(e.value),onClick:"az"===e.value?()=>U(e):void 0,disabled:"az"===e.value&&R,className:(0,j.cn)("flex flex-col gap-[0.4rem] md:gap-2 justify-center items-start relative bg-transparent p-0 min-w-fit","az"===e.value&&R&&"opacity-50 cursor-not-allowed"),"aria-selected":a,role:"tab",tabIndex:a?0:-1,"data-state":a?"active":"inactive",children:[(0,l.jsx)("div",{className:"flex gap-2.5 justify-center items-start relative py-2 px-1 sm:px-4 bg-transparent cursor-pointer hover:bg-body-light hover:rounded-[10px] transition-all duration-250",children:(0,l.jsx)("span",{className:"text-white",children:e.label})}),(0,l.jsx)("div",{className:"h-[3px] w-full relative","aria-hidden":"true",children:(0,l.jsx)("div",{className:"tab-underline absolute inset-0","data-active":a})})]},e.value)})}),(0,l.jsx)("div",{ref:q,className:(0,j.cn)("relative transition-all duration-300 ease-in-out w-full block",E?"opacity-50":"opacity-100"),children:(0,l.jsx)("div",{className:"w-full block",children:E?(0,l.jsx)(S.default,{loading:!0,title:F(b),games:[],trigger:b}):(0,l.jsx)(A,{value:b,className:"w-full block",id:"panel-".concat(b),"aria-labelledby":"tab-".concat(b),children:B[b]||B.recommended})})})]})});var Z=t(1562),L=t(807),P=t(1189),R=t(1548),G=t(3362),E=t(8453);t(3238);let I=r.forwardRef((e,a)=>{let{...t}=e;return(0,l.jsx)("nav",{ref:a,"aria-label":"breadcrumb",className:"mb-[3px]",...t})});I.displayName="Breadcrumb";let q=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,l.jsx)("ol",{ref:a,className:(0,j.cn)("flex flex-wrap items-center  font-bold break-words text-sm text-muted-foreground",t),...r})});q.displayName="BreadcrumbList";let T=r.forwardRef((e,a)=>{let{className:t,isActive:r,...n}=e;return(0,l.jsx)("li",{ref:a,className:(0,j.cn)("inline-flex items-center gap-1.5",r&&"border-none",t),...n})});T.displayName="BreadcrumbItem";let _=r.forwardRef((e,a)=>{let{asChild:t,className:r,...n}=e,o=t?G.DX:"a";return(0,l.jsx)(o,{ref:a,className:(0,j.cn)("transition-colors hover:text-foreground focus:outline-none focus:border-none",r),...n})});_.displayName="BreadcrumbLink",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,l.jsx)("span",{ref:a,role:"link","aria-disabled":"true","aria-current":"page",className:(0,j.cn)("font-normal text-foreground border-none",t),...r})}).displayName="BreadcrumbPage";let O=e=>{let{children:a,className:t,...r}=e;return(0,l.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,j.cn)("[&>svg]:size-3.5",t),...r,children:null!=a?a:(0,l.jsx)(E.A,{})})};O.displayName="BreadcrumbSeparator";var D=t(5692);let U=b()(()=>t.e(780).then(t.bind(t,6780)),{loadableGenerated:{webpack:()=>[6780]},ssr:!1}),F=b()(()=>t.e(841).then(t.bind(t,1222)),{loadableGenerated:{webpack:()=>[1222]},loading:()=>(0,l.jsx)("div",{className:"w-full h-[300px] flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-pulse bg-gray-700 rounded-lg w-full h-full"})}),ssr:!0}),M=b()(()=>Promise.all([t.e(193),t.e(707),t.e(467),t.e(555)]).then(t.bind(t,4555)),{loadableGenerated:{webpack:()=>[4555]},loading:()=>(0,l.jsx)("div",{className:"w-full h-[300px] mb-8 flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-pulse bg-gray-700 rounded-lg w-full h-full"})}),ssr:!0}),B=b()(()=>Promise.all([t.e(193),t.e(856)]).then(t.bind(t,9856)),{loadableGenerated:{webpack:()=>[9856]},loading:()=>(0,l.jsx)("div",{className:"w-full h-[200px] flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-pulse bg-gray-700 rounded-lg w-full h-full"})}),ssr:!0}),V=b()(()=>Promise.resolve().then(t.bind(t,7202)),{loadableGenerated:{webpack:()=>[7202]},loading:()=>(0,l.jsx)("div",{className:"w-full h-[500px] flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-pulse bg-gray-700 rounded-lg w-full h-full"})}),ssr:!0});function J(e){var a,t,s,i,c;let{category:d,categoryNewGamesCategoryNew:u,categoryPopularGamesCategoryPopular:m,categoryCarousels:g=[],currentPage:v=1,currentSort:h="recommended",faqData:p,topCategories:b=[],currentSortData:y,isLoading:x,handlePageChangeWithLoading:w,handleSortChangeWithLoading:j,breadcrumbs:N,metatags:k,structuredData:C,langResponse:A,newGamesResponse:S}=e,G=(0,n.useRouter)(),E=(0,o.useTranslations)("common"),[J,W]=(0,r.useState)(!1),{ref:H,inView:Q}=(0,D.Wx)({triggerOnce:!0,threshold:0});(0,r.useEffect)(()=>{let e;let a=()=>{W(window.innerWidth<768)};a();let t=()=>{clearTimeout(e),e=setTimeout(a,150)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),clearTimeout(e)}},[]);let X=(0,r.useMemo)(()=>{var e;return(null==d?void 0:d.addPopularGames)&&(null!==(e=null==m?void 0:m.results)&&void 0!==e?e:[]).length>0},[d,m]),Y=(0,r.useMemo)(()=>(null==d?void 0:d.addNewGames)===!0&&(null==u?void 0:u.results)&&u.results.length>0,[null==d?void 0:d.addNewGames,null==u?void 0:u.results]),K=1===v&&"recommended"===h,$=(0,r.useCallback)(e=>e?e.startsWith("/")?e:"/c/".concat(e):"",[]),ee=(0,r.useMemo)(()=>{var e,a,t,r,n,o;return(0,l.jsx)("div",{className:"flex justify-between items-left self-stretch relative w-full",children:(0,l.jsxs)("div",{className:"flex-grow sections w-full",children:[K&&(0,l.jsxs)(l.Fragment,{children:[(null==d?void 0:d.addPopularGames)&&X&&(null!==(t=null==m?void 0:null===(e=m.results)||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0&&(0,l.jsx)(M,{title:"".concat(E("games.popular")," ").concat(null==d?void 0:d.name),items:null!==(r=null==m?void 0:m.results)&&void 0!==r?r:[],className:"game-carousel default-carousel  catId-".concat(d.id),categoriesIcon:null==d?void 0:d.categoriesIcon,categoryPath:"".concat(G.asPath,"?sort=popular"),teaserType:"regular",showSeeAll:!1,showHeaderSeeAll:!1},"popular-".concat(G.asPath)),(null==d?void 0:d.addNewGames)&&Y&&(null==S?void 0:null===(a=S.categoryGames)||void 0===a?void 0:a.status)&&(null!==(n=null==u?void 0:u.results)&&void 0!==n?n:[]).length>0&&(0,l.jsx)(M,{title:"".concat(E("games.new")," ").concat(null==d?void 0:d.name),items:null!==(o=null==u?void 0:u.results)&&void 0!==o?o:[],className:"game-carousel default-carousel  catId-".concat(d.id),categoriesIcon:null==d?void 0:d.categoriesIcon,categoryPath:"".concat(G.asPath,"?sort=new"),teaserType:"featured",showSeeAll:!1,showHeaderSeeAll:!1},"new-".concat(G.asPath)),null==g?void 0:g.map((e,a)=>{if(!(null==e?void 0:e.game)||0===e.game.length)return null;let t=e.game.filter(e=>e.title!=="Game ".concat(e.id));return 0===t.length?null:(0,l.jsx)(M,{title:e.carouselName,items:t,className:"game-carousel default-carousel  catId-".concat(e.tid),categoriesIcon:e.categoriesIcon,categoryPath:$(e.alias),teaserType:"regular",showSeeAll:!0,showHeaderSeeAll:t.length>5},"".concat(G.asPath,"-").concat(a))})]}),(0,l.jsx)("section",{"aria-label":"".concat(E("games.all")," ").concat(null==d?void 0:d.name),className:"mb-6 grid-".concat(null==d?void 0:d.id),children:(0,l.jsx)(V,{title:"".concat(E("games.all")," ").concat(null==d?void 0:d.name),games:y.results,categoryId:null==d?void 0:d.id,trigger:"all",currentPage:v,totalGames:y.total,onPageChange:w,loading:x})})]})})},[K,X,Y,d,null==m?void 0:m.results,null==u?void 0:u.results,g,y,x,G.asPath,E,$,w,v,null==S?void 0:null===(a=S.categoryGames)||void 0===a?void 0:a.status]),ea=(0,r.useMemo)(()=>(0,l.jsx)("section",{"aria-label":"".concat(E("games.new")," ").concat(null==d?void 0:d.name),className:"mb-6",children:(0,l.jsx)(V,{title:"".concat(E("games.new")," ").concat(null==d?void 0:d.name),games:y.results,categoryId:null==d?void 0:d.id,trigger:"new",currentPage:v,totalGames:y.total,onPageChange:w,loading:x})}),[null==d?void 0:d.name,null==d?void 0:d.id,y,v,x,E,w]),et=(0,r.useMemo)(()=>(0,l.jsx)("section",{"aria-label":"".concat(E("games.most-liked")," ").concat(null==d?void 0:d.name),className:"mb-6",children:(0,l.jsx)(V,{title:"".concat(E("games.most-liked")," ").concat(null==d?void 0:d.name),games:y.results,categoryId:null==d?void 0:d.id,trigger:"mostliked",currentPage:v,totalGames:y.total,onPageChange:w,loading:x})}),[null==d?void 0:d.name,null==d?void 0:d.id,y,v,x,E,w]),el=(0,r.useMemo)(()=>(0,l.jsx)("section",{"aria-label":"".concat(null==d?void 0:d.name," ").concat(E("games.a-z")),className:"mb-6 a-z-games",children:(0,l.jsx)(V,{title:"".concat(null==d?void 0:d.name," ").concat(E("games.a-z")),games:y.results,categoryId:null==d?void 0:d.id,trigger:"az",currentPage:v,totalGames:y.total,onPageChange:w,loading:x})}),[null==d?void 0:d.name,null==d?void 0:d.id,y,v,x,E,w]),er=(0,r.useMemo)(()=>(0,l.jsx)("section",{"aria-label":"".concat(null==d?void 0:d.name," ").concat(E("games.z-a")),className:"mb-6",children:(0,l.jsx)(V,{title:"".concat(null==d?void 0:d.name," ").concat(E("games.z-a")),games:y.results,categoryId:null==d?void 0:d.id,trigger:"za",currentPage:v,totalGames:y.total,onPageChange:w,loading:x})}),[null==d?void 0:d.name,null==d?void 0:d.id,y,v,x,E,w]),en=(0,r.useMemo)(()=>{var e,a;return null==d?void 0:null===(a=d.description)||void 0===a?void 0:null===(e=a.processed)||void 0===e?void 0:e.replace(/<[^>]*>/g,"")},[null==d?void 0:null===(t=d.description)||void 0===t?void 0:t.processed]),eo=(0,l.jsxs)(P.A,{langLinks:A,children:[(0,l.jsx)(L.W,{description:en,image:null==d?void 0:null===(s=d.categoriesIcon)||void 0===s?void 0:s.url,metatags:k,structuredData:C,category:d}),(0,l.jsxs)("div",{className:"w-full wrapper flex flex-col",children:[(0,l.jsxs)("header",{role:"banner",className:"w-full mb-8 pt-4 lg:pt-0",children:[(0,l.jsx)("nav",{"aria-label":"Breadcrumb",children:(0,l.jsx)(I,{children:(0,l.jsx)(q,{children:null==N?void 0:N.map((e,a)=>(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(T,{isActive:a===N.length-1,children:a===N.length-1?(0,l.jsx)("span",{className:"text-primary border-none","aria-current":"page",children:e.name}):(0,l.jsx)(_,{href:e.link,className:"text-primary hover:underline focus:outline-none",children:"Categories"===e.name?E("navigation.Categories"):e.name})}),a<N.length-1&&(0,l.jsx)(O,{className:"text-primary","aria-hidden":"true"})]},e.link))})})}),(0,l.jsx)(Z.o,{children:(null==d?void 0:d.name)||""}),(null==d?void 0:null===(i=d.description)||void 0===i?void 0:i.processed)&&(0,l.jsx)("div",{className:"leading-5 text-base text-[#B4C4D4] leading-[1.25]",dangerouslySetInnerHTML:{__html:d.description.processed},"aria-label":"About ".concat(d.name),id:"category-description"})]}),(0,l.jsx)("main",{role:"main",id:"main-content",className:"w-full",children:(0,l.jsx)("div",{className:"w-full flex flex-col",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(z,{recommended:ee,new:Y?ea:null,mostLiked:et,az:el,za:er,onTabChange:e=>Promise.resolve(j(e)),addPopularGames:null==d?void 0:d.addPopularGames}),x&&(0,l.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:"Loading games..."})]})})})]}),(0,l.jsxs)("div",{className:"bg-body-dark w-full block clear-both mt-12 pb-12",role:"complementary",children:[((null==d?void 0:d.aboutCategory)||p)&&(0,l.jsx)(F,{faqContent:(null==d?void 0:null===(c=d.aboutCategory)||void 0===c?void 0:c.processed)||"",title:(null==d?void 0:d.aboutCategoryTitle)||(null==p?void 0:p.title)||"",faqData:p}),(0,l.jsx)(B,{categories:b,showTitle:!0,titleText:E("navigation.Categories"),seeAllLink:{text:E("see-more"),href:"/categories"}})]}),(0,l.jsxs)("div",{role:"contentinfo",className:"relative h-[51px] pb-10 bg-[#060d19]",children:[(0,l.jsx)("span",{className:"bg-nav-light absolute top-0 bottom-0 my-auto left-0 w-[calc(50%-75px)] h-[1px]","aria-hidden":"true"}),(0,l.jsx)(f(),{src:"/assets/svg/four-icon.svg",width:"51",height:"51",alt:"Coolmath Games Logo",className:"absolute left-0 right-0 m-auto",priority:!0}),(0,l.jsx)("span",{className:"bg-nav-light absolute top-0 bottom-0 my-auto right-0 w-[calc(50%-75px)] h-[1px]","aria-hidden":"true"})]})]});return(0,l.jsx)(R.t,{children:(0,l.jsxs)(r.Suspense,{fallback:(0,l.jsx)("div",{className:"text-center p-4",children:"Loading..."}),children:[eo,(0,l.jsx)(U,{})]})})}let W=e=>e?{results:Array.isArray(e.results)?e.results:[],total:"number"==typeof e.total?e.total:0,timestamp:"timestamp"in e?e.timestamp:Date.now()}:{results:[],total:0,timestamp:Date.now()},H=e=>{let a=(0,n.useRouter)();(0,o.useTranslations)("common");let{handlePageChange:t,handleSortChange:s}=function(){let e=(0,n.useRouter)(),{getCachedData:a,clearCache:t}=v(),[l,o]=(0,r.useState)(!1),[s,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let a=()=>{o(!0)},t=()=>{o(!1)};return e.events.on("routeChangeStart",a),e.events.on("routeChangeComplete",t),()=>{e.events.off("routeChangeStart",a),e.events.off("routeChangeComplete",t)}},[e]),(0,r.useEffect)(()=>{let a=e.query.sort;d("az"===a||"za"===a),i(a||null)},[e.query.sort]),(0,r.useEffect)(()=>{var a;let l=null===(a=e.query.slug)||void 0===a?void 0:a[0];l&&l!==u.current&&(t(),u.current=l)},[e.query.slug,t]),{handlePageChange:(0,r.useCallback)(async t=>{let l=e.query.sort||"recommended",[r]=e.asPath.split("?");a(l,t)||o(!0);try{if("recommended"===l&&1===t){let a=e.locale!==e.defaultLocale?"/".concat(e.locale):"",t="".concat(a).concat(r);await e.push(t,void 0,{locale:e.locale,scroll:!0});return}let a=e.locale!==e.defaultLocale?"/".concat(e.locale):"",n="".concat(a).concat(r);await e.push({pathname:n,query:{sort:l,page:t.toString()}},void 0,{locale:e.locale,scroll:!0})}catch(e){console.error("Navigation error:",e),o(!1)}},[e,a]),handleSortChange:(0,r.useCallback)(async t=>{let[l]=e.asPath.split("?"),r=e.query.sort,n=parseInt(e.query.page)||1;a(t,n)||o(!0);let s=("az"===t||"za"===t)&&c;try{if("recommended"===t){let a=e.locale!==e.defaultLocale?"/".concat(e.locale):"",t="".concat(a).concat(l);await e.push(t,void 0,{locale:e.locale,scroll:!0});return}let a=s?n:1;i(r),d("az"===t||"za"===t);let o=e.locale!==e.defaultLocale?"/".concat(e.locale):"",c="".concat(o).concat(l);await e.push({pathname:c,query:{sort:t,page:a.toString()}},void 0,{locale:e.locale,scroll:!0})}catch(e){console.error("Navigation error:",e),o(!1)}},[e,a,c]),isNavigating:l,currentPage:parseInt(e.query.page)||1,currentSort:e.query.sort||"recommended",previousSort:s,isAZTab:c}}(),{getCachedData:i,setCachedData:c,clearCache:d}=v(),[u,m]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(0),[b,y]=(0,r.useState)({results:[],total:0}),{category:w,categoryNewGamesCategoryNew:j,categoryNewGamesTabResponse:N,categoryPopularGamesCategoryPopular:k,categoryAllGamesCategoryAll:C,categoryAZGamesCategoryAZ:A,categoryZAGamesCategoryZA:S,categoryMostLikedGamesCategoryMostLiked:z,categoryCarousels:Z=[],error:L,currentPage:P=1,currentSort:R="recommended",faqData:G,topCategories:E=[],langResponse:I}=e;(0,r.useEffect)(()=>{m(!0)},[]),(0,r.useEffect)(()=>{var e;(null===(e=a.query.slug)||void 0===e?void 0:e[0])&&(null==w?void 0:w.id)&&(d(),h(!1),p(0),y({results:[],total:0}))},[a.query.slug,null==w?void 0:w.id,d]);let q=(0,r.useCallback)(()=>{try{var e,a;let t;let l="recommended"===R?"all":R,r=i(l,P);if("za"===R){if(x.v.debug("Z-A sort requested in production mode"),r&&(null===(e=r.results)||void 0===e?void 0:e.length)>0)return x.v.debug("Using cached Z-A data"),W(r);if(x.v.debug("Using Z-A data from GraphQL query (categoryZAGamesCategoryZA)"),!S||!S.results)return x.v.warn("Z-A GraphQL data is missing or invalid, using empty data"),W({results:[],total:0});x.v.debug("Z-A data length:",S.results.length||0);let a=W(S);if(a.results.length>0&&(null==w?void 0:w.id))try{c("za",P,a)}catch(e){x.v.warn("Failed to cache Z-A data from props:",e)}return a}if(r){if((null===(a=r.results)||void 0===a?void 0:a.length)>0)return W(r);return W(null)}switch(R){case"new":(null==N?void 0:N.results)&&N.results.length>0?t=N:(null==j?void 0:j.results)&&j.results.length>0?t=j:(console.warn("New games data is missing or empty, falling back to empty data"),t={results:[],total:0});break;case"popular":(null==k?void 0:k.results)?t=k:(console.warn("Popular games data is missing, falling back to empty data"),t={results:[],total:0});break;case"az":(null==A?void 0:A.results)?t=A:(console.warn("A-Z games data is missing, falling back to empty data"),t={results:[],total:0});break;case"za":console.log("Using Z-A data from GraphQL query (categoryZAGamesCategoryZA)"),S?t=S:(console.warn("Z-A GraphQL data is missing, falling back to empty data"),t={results:[],total:0});break;case"mostliked":(null==z?void 0:z.results)?t=z:(console.warn("Most liked games data is missing, falling back to empty data"),t={results:[],total:0});break;default:(null==C?void 0:C.results)?t=C:(console.warn("All games data is missing, falling back to empty data"),t={results:[],total:0})}let n=W(t);if(n.results.length>0&&(null==w?void 0:w.id))try{let e="recommended"===R?"all":R;c(e,P,n)}catch(e){x.v.warn("Failed to cache sort data:",e),d();try{let e="recommended"===R?"all":R;c(e,P,n)}catch(e){x.v.error("Failed to cache sort data after cleanup:",e)}}return n}catch(e){return x.v.error("Error in getCurrentSortData:",e),{results:[],total:0}}},[R,P,null==w?void 0:w.id,j,N,k,A,S,z,C,i,c,d]);(0,r.useEffect)(()=>{if(null==w?void 0:w.id){if(x.v.debug("Fetching data for sort:",R,"page:",P),"za"===R){var e;x.v.debug("Z-A sort detected in production mode");let a=i("za",P);if(a&&(null===(e=a.results)||void 0===e?void 0:e.length)>0){x.v.debug("Using cached Z-A data for Z-A sort"),y(a);return}x.v.debug("No cached Z-A data, fetching from props")}y(q())}},[null==w?void 0:w.id,q,R,P,i,c]);let T=async e=>{let a=i("recommended"===e?"all":e,1);if("za"===e&&!a){x.v.debug("Z-A sort change requested in production mode"),x.v.debug("No cached Z-A data, proceeding with normal sort change"),(null==b?void 0:b.total)&&p(b.total),h(!0),await s(e),h(!1);return}a?(await s(e),y(W(a))):((null==b?void 0:b.total)&&p(b.total),h(!0),await s(e),h(!1))},_=async e=>{let a=i("recommended"===R?"all":R,e);a?(await t(e),y(W(a))):((null==b?void 0:b.total)&&p(b.total),h(!0),await t(e),h(!1))};if(!u)return null;let O=g?{...b,total:f||(null==b?void 0:b.total)}:b;return(0,l.jsx)(J,{...e,currentSortData:O,isLoading:g,handlePageChangeWithLoading:_,handleSortChangeWithLoading:T})};var Q=t(3368),X=t.n(Q),Y=t(2659),K=t(700),$=!0;let ee=function(e){var a,t,n,o,s,i;let{initialCache:c,...d}=e,u=null==d?void 0:null===(a=d.metatags)||void 0===a?void 0:a.find(e=>"meta"===e.tag&&e.attributes&&"name"in e.attributes&&"title"===e.attributes.name&&"content"in e.attributes&&e.attributes.content),m=u&&"attributes"in u&&"content"in u.attributes?u.attributes.content:(null==d?void 0:null===(t=d.category)||void 0===t?void 0:t.name)?"".concat(d.category.name," - Coolmath Games"):"Coolmath Games - Free Online Math Games";return(0,r.useEffect)(()=>{if("undefined"!=typeof document){(0,Y.Hp)(m);try{d.metatags&&Array.isArray(d.metatags)&&(0,Y.oX)(d.metatags)}catch(e){console.error("[CategoryPageWrapper] Error updating metatags:",e)}}},[m,d.metatags,null===(n=d.category)||void 0===n?void 0:n.id,null===(o=d.category)||void 0===o?void 0:o.name]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(X(),{children:(0,l.jsx)("title",{children:m})},"category-head-".concat(null===(s=d.category)||void 0===s?void 0:s.id)),d.structuredData&&Array.isArray(d.structuredData)?d.structuredData.map((e,a)=>{var t;return e?(0,l.jsx)(K.Y,{data:e},"sd-".concat(a,"-").concat(null===(t=d.category)||void 0===t?void 0:t.id)):null}):d.structuredData?(0,l.jsx)(K.Y,{data:d.structuredData},"sd-single-".concat(null===(i=d.category)||void 0===i?void 0:i.id)):null,(0,l.jsx)(g,{initialCache:c,children:(0,l.jsx)(H,{...d})})]})}},1562:(e,a,t)=>{"use strict";t.d(a,{o:()=>r});var l=t(4848);let r=(0,t(6540).memo)(function(e){let{children:a,line:t=!1,className:r="",underline:n=!1}=e;return(0,l.jsxs)("h1",{className:"text-[24px] md:text-[32px] mb-[10px] flex items-center ".concat(r," ").concat(n?"pb-[10px] border-b-2 border-b-primary border-solid":""),id:"page-heading",children:[(0,l.jsx)("span",{className:"".concat(t&&!n?"pr-[25px]":""," max-w-[90%] shrink-0"),children:a}),t&&!n?(0,l.jsx)("span",{className:"w-full h-[1px] bg-nav-light"}):""]})})}},e=>{var a=a=>e(e.s=a);e.O(0,[791,899,777,412,189,807,607,202,636,593,792],()=>a(3756)),_N_E=e.O()}]);